# ููุงุญุธุงุช ุชุทููุฑ ููุชุจุฉ HAL - ุงูุงุชุตุงู ุจูุงุณุทุฉ USB ๐ง

ูุฐุง ุงูููุงู ูุนุชูุฏ ุนูู ูุฌููุนุฉ ุชุทููุฑ RobotCtrl ุงูุฎุงุตุฉ ุจูุงุ ูุน ูุญุฏุฉ ูุนุงูุฌุฉ ุงูุฐูุฑูุงุช ุงููุฏูุฌุฉ STM32F407ZET6 ูููุงูุฐ USB_Slave ุนูู ุงูุฏุจุงุจุฉ PA11 ู PA12. ููุญุตูู ุนูู ุงููุฎุทุท ุงูุฃุณุงุณู ููุฒูุฏ ูู ุงูุชูุงุตููุ ููุฑุฌู ุฒูุงุฑุฉ [**RobotCtrl - STM32 ้็จๅผๅๅฅไปถ**](https://wiki-power.com/ar/RobotCtrl-STM32%E9%80%9A%E7%94%A8%E5%BC%80%E5%8F%91%E5%A5%97%E4%BB%B6).

## ุฎุทูุงุช ุจุณูุทุฉ ูุงุฎุชุจุงุฑ ุงูุฏูุฑุฉ

### ุงูุชูููู ุฏุงุฎู CubeMX

1. ูู ุจุชูููู ุงููุคูุช ุงูุฎุงุฑุฌู ุนุงูู ุงูุณุฑุนุฉ (HSE).
2. ูู ุจุชูููู ุดุฌุฑุฉ ุงูุณุงุนุฉ ููุชุฃูุฏ ูู ุฃู ููุงูุฉ ุดุฌุฑุฉ ุงูุณุงุนุฉ ุชุญุชูู ุนูู "48MHz Clocks (MHz)".
3. ูู ุตูุญุฉ "USB_OTG_FS"ุ ูู ุจุชุนููู "Mode" ุฅูู "Device_Only"ุ ุญูุซ ูููู ููุงูุฐ ุงูุฏุจุงุจุฉ ุงูุงูุชุฑุงุถูุฉ ูู PA11 ู PA12.
4. ูู ุตูุญุฉ "USB_DEVICE"ุ ูู ุจุชุนููู "Class For FS IP" ุฅูู "Commmunication Device Class (Virtual Port Com)".

### ุงูุชูููู ุฏุงุฎู ุงูุดููุฑุฉ

ูุชูููุฐ ูุธููุฉ ุฏูุฑุฉ ุงูุจูุงูุงุชุ ูุง ุนููู ุณูู ุฅุถุงูุฉ ุณุทุฑ ูุงุญุฏ ุฏุงุฎู ุฏุงูุฉ "CDC_Receive_FS" ูู ููู "usbd_cdc_if.c":

```c title="usbd_cdc_if.c"
CDC_Transmit_FS(Buf,*Len); // ุฅุฑุณุงู ุงูุจูุงูุงุช ููุณูุง
```

### ุงูุงุฎุชุจุงุฑ

ูู ุจูุชุญ ูุฏูุฑ ุงูุฃุฌูุฒุฉ ููุชุญูู ูู ุธููุฑ ุงูุฌูุงุฒ. ุฅุฐุง ูู ุชุธูุฑ ุงูุฌูุงุฒ ุฃู ุฅุฐุง ูุงู ููุงู ุนูุงูุฉ ุชุนุฌุจ ุตูุฑุงุกุ ููุฑุฌู ุชูุฒูู ุจุฑูุงูุฌ ุงูุชุดุบูู ูู ูููุน ST [**STM32 Virtual COM Port Driver**](https://www.st.com/content/st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-utilities/stsw-stm32102.html).

ุฅุฐุง ูู ูุชู ุงูุชุนุฑู ุนูู ุงูุฌูุงุฒ ุจุดูู ุตุญูุญ ุญุชู ุจุนุฏ ุชุซุจูุช ุงูุจุฑูุงูุฌ ุงูุชุดุบููุ ูููููู ูุญุงููุฉ ุฒูุงุฏุฉ "Minimum Heap Size" ุฅูู "0x600" ุฃู ุฃูุซุฑ ุฏุงุฎู CubeMX - "Project Manager" - "Project" - "Linker Settings".

ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงูุจูุฑุช ุงูุณูุณูู (ุฃู ุณุฑุนุฉ ุงุชุตุงู)ุ ูููููู ุฅุฑุณุงู ุฃู ุญุฑููุ ูุณุชุชููู ููุณ ุงูุญุฑูู ูุฑุฏ ุนูู ุฐูู.

## ุงููุฑุงุฌุน ูุงูุดูุฑ

- [ุงุณุชุฎุฏุงู STM32 CubeMX HAL ูุฅูุดุงุก ูุดุฑูุน USBVCP ููููุฐ ุงูุณูุณูุฉ ุงูุงูุชุฑุงุถู](https://blog.csdn.net/yxy244/article/details/102620249)

> ุนููุงู ุงููุต: <https://wiki-power.com/>  
> ูุชู ุญูุงูุฉ ูุฐุง ุงูููุงู ุจููุฌุจ ุงุชูุงููุฉ [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh)ุ ููุฑุฌู ุฐูุฑ ุงููุตุฏุฑ ุนูุฏ ุฅุนุงุฏุฉ ุงููุดุฑ.

> ุชูุช ุชุฑุฌูุฉ ูุฐู ุงููุดุงุฑูุฉ ุจุงุณุชุฎุฏุงู ChatGPTุ ูุฑุฌู [**ุชุฒููุฏูุง ุจุชุนูููุงุชูู**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) ุฅุฐุง ูุงูุช ููุงู ุฃู ุญุฐู ุฃู ุฅููุงู.