````markdown
# استخدام acme.sh لطلب وتجديد شهادة النطاق تلقائيًا (Synology Docker)

يشرح هذا المقال كيفية استخدام صورة Docker acme.sh للقيام بعمليات طلب وتجديد شهادات النطاق تلقائيًا.

[**acme.sh**](https://github.com/acmesh-official/acme.sh) يمكنه إنشاء شهادات مجانية من Let's Encrypt ويدعم نشرها باستخدام Docker. يدعم أيضًا طريقتي التحقق من النطاق: HTTP وDNS، بما في ذلك الوضع اليدوي وDNS التلقائي ووضع الاسم البديل لتلبية متطلبات البيئات المختلفة. يمكنك أيضًا طلب شهادات لعدة نطاقات معًا وشهادات النطاق العامة، وتلقائيًا تجديد الشهادات ونشرها في مشاريعك.

## تحضير واجهة برمجة تطبيقات نظام أسماء النطاق (DNS API)

سيتم استخدام Tencent Cloud كمثال في هذا المقال لطلب واجهة برمجة تطبيقات نظام أسماء النطاق (DNS API). يرجى الرجوع إلى الوثائق الرسمية [**dnsapi**](https://github.com/acmesh-official/acme.sh/wiki/dnsapi) للمنصات الأخرى.

أولاً، قم بزيارة [**DNSPOD**](https://console.dnspod.cn/)، انقر على صورة الشخص في الزاوية العلوية اليمنى - "إدارة المفاتيح".

ثم، قم بإنشاء مفتاح جديد وانسخ "المعرف" و "الرمز".

## نشرها على Synology Docker

سيتم شرح طريقة تشغيل دايمون ووضع الحاوية على Docker في هذا البرنامج التعليمي لضمان تجديد الشهادة تلقائيًا عند انتهاء صلاحيتها.

### إنشاء مجلد الإعدادات

لنقم أولاً بإنشاء مجلد `/docker/acme.sh` ومن ثم إنشاء ملف "account.conf" يدويًا:

![](https://media.wiki-power.com/img/20210430212420.png)

ثم، قم بتحرير هذا الملف وأضف يدويًا هذه الأسطر:

```conf
export DP_Id="المعرف الذي قمت بالتقديم له مؤخرًا"
export DP_Key="الرمز الذي قمت بالتقديم له مؤخرًا"
AUTO_UPGRADE='1'
```
````

بعد ذلك، احفظ وأغلق الملف.

### تنزيل الصورة وتكوين الحاوية

افتح حزمة Synology Docker، ثم قم بتنزيل صورة `neilpang/acme.sh` واضغط مرتين عليها للدخول في "الإعدادات المتقدمة".

على صفحة "الأقراص"، قم بتكوين المجلدات المرفقة عن طريق النقر فوق "إضافة مجلد" واختيار المسار المحلي `/docker/acme.sh` والمسار المستهدف `/acme.sh` (الذي لا يمكن تغييره افتراضيًا):

![](https://media.wiki-power.com/img/20210430214221.png)

على صفحة "الشبكة"، قم بالتأكد من تحديد "استخدام نفس الشبكة مثل مضيف Docker".

ثم، قم بالانتقال إلى صفحة "البيئة"، وادخل الأمر "daemon" في مربع الأوامر:

![](https://media.wiki-power.com/img/20210430215244.png)

بعد ذلك، قم بإنشاء وتشغيل الحاوية. انقر مرتين على الحاوية المشغلة، وانتقل إلى صفحة "الطرفية"، وانقر فوق "بدء بالأمر" وأدخل "sh" ثم انقر على "موافق".

أدخل الأمر التالي لتحديث تلقائي:

```shell
acme.sh --upgrade --auto-upgrade
```

ثم، أدخل الأمر التالي لطلب الشهادة:

```shell
acme.sh --issue --dns dns_dp -d wiki-power.com -d *.wiki-power.com
```

حيث "dns_dp" يمثل Tencent Cloud DNSPod. إذا كنت تستخدم Alibaba Cloud، قم بإدخال "dns_ali"، وإذا كنت تستخدم Cloudflare، قم بإدخال "dns_cf"، وللمنصات الأخرى،

إذا تمت جميع الأمور بسلاسة، يمكنك العثور داخل المجلد `docker/acme.sh/اسم المجلد بالاسم النطاق` على الملفات `اسم المجلد بالاسم النطاق.cer` و `اسم المجلد بالاسم النطاق.key`، وهذه هي ملفات الشهادة والمفتاح يمكن نسخها إلى المكان الذي تحتاجه.

## مراجعة وشكر

- [خدمة Synology NAS المتقدمة - نشر acme.sh للحصول تلقائيًا على شهادة نطاق](https://www.ioiox.com/archives/88.html)

> عنوان النص: <https://wiki-power.com/>
> يتم حماية هذا المقال بموجب اتفاقية [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh)، يُرجى ذكر المصدر عند إعادة النشر.

> تمت ترجمة هذه المشاركة باستخدام ChatGPT، يرجى [**تزويدنا بتعليقاتكم**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) إذا كانت هناك أي حذف أو إهمال.
