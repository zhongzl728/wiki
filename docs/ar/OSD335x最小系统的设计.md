# تصميم النظام الأدنى لـ OSD335x

![رابط الصورة](https://media.wiki-power.com/img/20211012144907.png)

قطعة OSD335x-SM من TI هي رقاقة تدمج معالج Cortex-A8 AM335x وذاكرة DDR3 ورقاقة إدارة الطاقة TPS65217C PMIC ومنظم الجهد TL5209 LDO والأجهزة السلبية المطلوبة وEEPROM بسعة 4 كيلوبايت، وتموجة هذه العناصر معًا في حزمة SIP (System-in-Package) ذات غلاف BGA.

![رابط الصورة](https://media.wiki-power.com/img/20211012153036.png)

يتضمن النظام الأدنى لـ OSD335x أربعة أقسام: الطاقة والساعة وإعادة التعيين وواجهة البرمجة والتصحيح. يمكن أيضًا إضافة زوج من الأزرار وبضعة مصابيح LED وبعض موصلات الأجهزة الخارجية لتسهيل الاستخدام.

![رابط الصورة](https://media.wiki-power.com/img/20211012155857.png)

## الطاقة

### الإدخال

- VIN_AC: إدخال الطاقة الرئيسي (DC5V@2A)، يمكن إضافة مفتاح حماية وحبيبات مغناطيسية وثنائيات قضبان وحماية الإدخال حسب الحاجة.
- VIN_USB: إدخال الطاقة عبر USB (DC5V@0.5A، يمكن زيادتها إلى 1.3A عبر PMIC الداخلي)، يُستخدم أيضًا كجهد وتيار مرجعي لمضيف USB 2.0.
- VIN_BAT: يمكن استخدامه كإدخال للبطارية (باستخدام طاقة البطارية بنطاق من 2.75 إلى 5.5 فولت) أو كإخراج (لشحن البطارية)، ولا يمكن استخدامه كإدخال للأحداث.

![رابط الصورة](https://media.wiki-power.com/img/20211012173057.png)

### الإخراج

- SYS_VOUT: يساوي جهد الإدخال لـ PMIC، ويجب ملاحظة أن العناصر الموصولة بهذا الدبوس يمكن استخدامها في نطاق 3-5 فولت، لأن PMIC يقوم بتبديل مصادر الإدخال عند شحن البطارية.
- SYS_VDD1_3P3V: إخراج 3.3 فولت مزود بواسطة TL5209 LDO وتمكينه بواسطة LDO4 من PMIC كمصدر طاقة رئيسي.
- SYS_VDD2_3P3V: إخراج 3.3 فولت مزود بواسطة LDO2 من PMIC.
- SYS_RTC_1P8V: إخراج 1.8 فولت مزود بواسطة LDO1 من PMIC، ويُستخدم أيضًا لتشغيل ساعة الوقت الحقيقي داخل AM335x.
- SYS_VDD_1P8V: إخراج 1.8 فولت مزود بواسطة LDO3 من PMIC.
- SYS_ADC_1P8V: إخراج 1.8 فولت مزود بواسطة LDO3 من PMIC ومزود بمرشح لتطبيقات التمثيل الذي يعمل أيضًا كمصدر طاقة لمحول ADC في AM335x.

يُوصى بإضافة نقاط اختبار لجميع مخرجات الطاقة لتسهيل التصحيح.

هناك أيضًا دبابيس للتيارات الداخلية: VDDSHV_3P3V وVDDS_DDR وVDD_MPU وVDD_CORE وVDDS_PLL. تُستخدم فقط لقياس نقاط الاختبار ولا تُوصل إلى دائرة خارجية.

![رابط الصورة](https://media.wiki-power.com/img/20211013142917.png)

### مداخل الإشارات والأرضيات الرمزية

![رابط الصورة](https://media.wiki-power.com/img/20211013143532.png)

يحتوي OSD335x على واجهة ADC، وإذا كنت بحاجة إلى استخدام ADC، يجب استخدام مصادر طاقة رمزية وأرضيات رمزية بشكل صحيح. واجهة ADC يمكن أن تتحمل إشارات رمزية بحد أقصى 1.8 فولت (بالإشارة إلى دبوس VREFP). عادةً ما يمكن توصيل VREFP مباشرة ب

- **PMIC_POWER_EN**: يُستخدم للتحكم في توقيت تشغيل PMIC على AM335x.
- **PMIC_IN_PWR_EN**: يُمكن PMIC وحدات buck و LDO من خلاله، عند توفير مستوى عالٍ، ستبدأ عملية التحكم في توقيت التشغيل.
- **RTC_PWRONRSTN**: إشارة إعادة تعيين الطاقة المستقلة لـ RTC على AM335x.
- **PMIC_OUT_LDO_PGOOD**: حالة إخراج LDO1 و LDO2، مستوى عالٍ يشير إلى إخراج جيد، بينما مستوى منخفض يُشير إلى عطل في أي من وحدات LDO.
- **EXT_WAKEUP**: دبوس استيقاظ الحدث الخارجي.
- **PMIC_OUT_NWAKEUP**: دبوس استيقاظ الحدث الخارجي من قبل الجهاز المضيف (فعّال عند المستوى المنخفض).
- **EXTINTN**: دبوس إدخال الانقطاع الخارجي لـ AM335x.
- **PMIC_OUT_NINT**: دبوس إخراج المحطة PMIC (فعّال عند المستوى المنخفض).

![صورة](https://media.wiki-power.com/img/20211013161927.png)

![صورة](https://media.wiki-power.com/img/20211013163119.png)

### زر الطاقة

يحتوي PMIC TPS65217C داخليًا على إشارة إعادة تعيين ذات مستوى منخفض فعّالة، متصلة بـ OSD335x من خلال دبوس PMIC_IN_PB_IN، ويمكن أيضًا توصيل زر إعادة التعيين خارجيًا. يتميز هذا الدبوس بفترة تقليل التردد تبلغ 50 مللي ثانية ومقاومة سحب داخلية. بالإضافة إلى ذلك، يحتوي زر الطاقة على الوظائف التالية:

- عند اكتشاف انخفاض في إشارة PMIC_IN_PB_IN، سيستيقظ PMIC من وضع الإيقاف أو وضع السكون.
- عندما يتم الاحتفاظ بإشارة PMIC_IN_PB_IN على مستوى منخفض لأكثر من 8 ثوانٍ، سيتم إعادة تشغيل/إعادة تعيين PMIC.
- إذا تم الاحتفاظ بدبوس PMIC_IN_PB_IN على مستوى منخفض لفترة طويلة، ستظل الجهاز تتنقل بين وضعي التعيين وإعادة التشغيل كل 8 ثوانٍ.

![صورة](https://media.wiki-power.com/img/20211013165738.png)

### مؤشر الطاقة

نستخدم SYS_VDD2_3P3V (150 مللي أمبير) كإخراج لمؤشر الطاقة.

![صورة](https://media.wiki-power.com/img/20211014092054.png)

## إعادة التعيين

هناك عدة طرق لإعادة تعيين OSD335x:

- إعادة تعيين باردة (إعادة تشغيل عند تشغيل الجهاز): تتم عند تشغيل الجهاز وتشغيل مجال الطاقة.
- إعادة تعيين ساخنة:
  - إعادة تعيين جزئية، لا تؤثر على المنطق العام.
  - تستخدم لتقليل وقت استعادة الإعادة.

لدينا 3 إشارات إعادة تعيين (تحتوي على نفس الأسماء كما في AM335x):

- PWRONRSTN: إعادة تعيين باردة؛ يجب الاحتفاظ بمستوى منخفض أثناء تشغيل الجهاز حتى تستقر جميع خطوط الإمداد بالطاقة الداخلية.
- WARMRSTN: إعادة تعيين ساخنة؛ بعض سجلات وحدات التحكم في الطاقة والإعادة تكون غير حساسة للإعادة الساخنة.
- RTC_PWRONRSTN: إشارة إعادة تعيين الطاقة لوحدة RTC المخصصة ولا تؤثر في إعادة التشغيل الباردة، ولن تؤثر على أي جزء آخر من الجهاز.

![صورة](https://media.wiki-power.com/img/20211014105556.png)

## الساعة

### OSC0 وOSC1

لدينا اثنان من مداخل الساعة في OSD335x:

- OSC0: مدخل ساعة عالي السرعة (الساعة الرئيسية

في التصميم المرجعي، تم اختيار مولد الذبذبة OSC0 بتردد 24 ميجاهرتز ومكثف سعة 18 بيكوفاراد ومقاومة بقيمة 1 ميجا أوم كـ Rbias.

![صورة](https://media.wiki-power.com/img/20211014101932.png)

تم تكوين سلك RTC_KALDO_ENN بشكل افتراضي بمقاومة خارجية من 10 كيلو أوم، وذلك لتمكين منظم الجهد الخطي الداخلي للساعة الحقيقية (RTC).

## واجهة التحميل والتصحيح

في التصميم المرجعي، تم استخدام واجهة JTAG.

![صورة](https://octavosystems.com/octavosystems.com/wp-content/uploads/2017/07/JTAG.jpg)

## ملحقات أخرى

### إعداد التشغيل

يمكن الرجوع إلى جدول إعداد التشغيل في [**كتيب مرجعي تقني AM335x (TRM)**](http://www.ti.com/lit/pdf/spruh73) في القسم الخاص بـ **مسامير إعداد SYSBOOT**.

في التصميم المرجعي، تم التكوين على النحو التالي:

![صورة](https://media.wiki-power.com/img/20211014110132.png)

تم تعيين المعلمات التالية:

- تعيين تردد الساعة على أنه 24 ميجاهرتز.
- تعطيل إخراج CLKOUT1 عبر XDMA_EVENT_INTR0. يُستخدم هذا السلك فقط للمحاكاة باستخدام JTAG.
- تعيين ترتيب التمهيد على أنه SPI0 -> MMC0 -> USB0 -> UART0.

### أزرار المستخدم والمصابيح الحالة (LED)

![صورة](https://media.wiki-power.com/img/20211014110906.png)

### توصيلات الملحقات

![صورة](https://media.wiki-power.com/img/20211014110947.png)

## مراجع وشكر

- [SO YOU WANT TO BUILD AN EMBEDDED LINUX SYSTEM؟](https://jaycarlson.net/embedded-linux/#)
- [OSD335x-SM System-in-Package Smallest AM335x Module, Quickest Design](https://octavosystems.com/octavo_products/osd335x-sm/#Technical%20Documents)
- [سلسلة دروس تصميم OSD335x المرجعية](https://octavosystems.com/app_notes/osd335x-design-tutorial/)

> عنوان النص: <https://wiki-power.com/>
> يتم حماية هذا المقال بموجب اتفاقية [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh)، يُرجى ذكر المصدر عند إعادة النشر.

> تمت ترجمة هذه المشاركة باستخدام ChatGPT، يرجى [**تزويدنا بتعليقاتكم**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) إذا كانت هناك أي حذف أو إهمال.
