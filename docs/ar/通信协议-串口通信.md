# بروتوكول الاتصال - اتصال المنفذ التسلسلي

يُعتبر اتصال المنفذ التسلسلي واحدًا من أكثر طرق الاتصال استخدامًا وأساسًا في الميكروكنترولر. يُستخدم عادة كوسيلة للتصحيح ومراقبة بيانات التواصل مع الميكروكنترولر وإرسال التعليمات، كما يمكن استخدامه للتواصل المتبادل بين اثنين من الميكروكنترولر. يتم تطبيق طبقة الاتصال التسلسلي وفقًا لمعيار RS-232 ومستوى TTL.

## طبقة البروتوكول

### التوازي والتسلسلي

- **الاتصال التوازي**: يتم نقل كل بت من البيانات في نفس الوقت، وهو أسرع ولكن يستهلك موارد دبوس أكثر.
- **الاتصال التسلسلي**: يتم نقل البيانات بترتيب تسلسلي، وهو يستهلك موارد دبوس أقل ولكن بسرعة أبطأ نسبيًا.

### الاتجاه الواحد والنصف الثنائي والكامل الثنائي

- **الاتجاه الواحد**: يتم نقل البيانات في اتجاه واحد فقط.
- **النصف الثنائي**: يسمح بنقل البيانات في اتجاهين، ولكن في نفس الوقت يُسمح فقط بنقل البيانات في اتجاه واحد، وهو عبارة عن اتصال تسلسلي قابل للتبديل في الاتجاه.
- **الكامل الثنائي**: يسمح بنقل البيانات في اتجاهين في نفس الوقت، وبالتالي، يعتبر الاتصال الكامل الثنائي مزيجًا من طريقتي الاتصال الواحد.

### المزامنة وغير المزامنة

- **الاتصال المزامن**: نقل الإشارات المتزامنة مع إشارة الساعة. على سبيل المثال، واجهات الاتصال مثل SPI و IIC.
- **الاتصال غير المزامن**: نقل الإشارات بدون إشارة مزامنة. على سبيل المثال، UART والشريط الواحد.

### USART و UART

- **UART**: جهاز الاستقبال/الإرسال اللازم للتواصل الغير متزامن (Universal Asynchronous Receiver/Transmitter)
- **USART**: جهاز الاستقبال/الإرسال اللازم للتواصل المتزامن وغير المتزامن (Universal Synchronous/Asynchronous Receiver/Transmitter)

![](https://media.wiki-power.com/img/20210207095411.png)

![](https://media.wiki-power.com/img/20210207095433.png)

يُعتبر USART ترقية لـ UART، حيث يختلفان في وجود خط CLK. عندما لا توجد إشارة CLK، يعني أنه لا توجد مهمة نقل بيانات، وعندما يكون هناك إشارة CLK، يعني أنه يتم نقل الإشارة ويوفر خط CLK وظيفة المزامنة الزمنية والتحقق الأكثر دقة.

## طبقة الفيزيائية

### معيار TTL

يرجى الرجوع إلى المقالة [**واجهة مستوى الجهد TTL · بروتوكول الاتصال - المستوى المنطقي الرقمي**](https://wiki-power.com/%D8%A8%D8%B1%D9%88%D8%AA%D9%88%D9%83%D9%88%D9%84_%D8%A7%D9%84%D8%A7%D8%AA%D8%B5%D8%A7%D9%84_%D8%A7%D9%84%D9%85%D8%B3%D8%AA%D9%88%D9%89_%D8%A7%D9%84%D9%85%D9%86%D8%B7%D9%82%D9%8A_%D8%A7%D9%84%D8%B1%D9%82%D9%85%D9%8A#ttl-%D8%A7%D9%84%D9%85%D9%86%D8%B7%D9%82%D8%A9_%D8%A7%D9%84%D8%AA%D8%B3%D9%84%D8%B3%D9%84%D9%8A%D8%A9).

### معيار RS-232

تعتبر طبقة الفيزيائية لاتصال RS-232 إنشاء اتصال بين جهازين من خلال خطوط إشارة المنفذ DB9، حيث يتم نقل إشارات البيانات عبر خطوط إشارة المنفذ التسلسلي باستخدام مستوى الجهد RS-232. نظرًا لأن المراقب العام يستخدم عادة مستوى الجهد TTL، فإنه يتطلب رقاقة تحويل مستوى جهد مخصصة لتحقيق الاتصال.

![](https://media.wiki-power.com/img/20220415102310.png)

مقارنة بين مستويات TTL و RS-232:

| المعيار الاتصالي | المعيار الجهد (للإرسال)                |
| ---------------- | -------------------------------------- |
| TTL 5V           | منطق `0`: 0~0.5V؛ منطق `1`: 2.4V-5V    |
| RS-232           | منطق `0`: +3V~+15V؛ منطق `1`: -15V~-3V |

الشكل المثالي للتوقيت المقابل:

![](https://media.wiki-power.com/img/20220415102914.png)

عادةً ما يستخدم معيار RS-232 واجهة DB9، حيث يستخدم الكمبيوتر واجهة الرأس (الإبر) ويستخدم أجهزة المودم واجهة الأنثى (الثقب):

![](https://media.wiki-power.com/img/20220415103401.png)

تعريف أطراف الواجهة:

| الرمز | الاسم                                | الوصف                                                                                                                                                                       |
| ----- | ------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| DCD   | كشف الحامل                           | Data Carrier Detect ، كشف حامل البيانات ، يُستخدم لإبلاغ DTE الطرف الآخر ما إذا كان الجهاز قد تلقى إشارة حامل من الطرف الآخر                                                |
| RXD   | استقبال البيانات                     | Receive Data ، إشارة استقبال البيانات ، أي الإدخال                                                                                                                          |
| TXD   | إرسال البيانات                       | Transmit Data ، إشارة إرسال البيانات ، أي الإخراج. يجب توصيل TXD و RXD بين الجهازين عبر تبادل التوصيل                                                                       |
| DTR   | جاهزية الجهاز النهائي للبيانات (DTE) | Data Terminal Ready ، جاهزية الجهاز النهائي للبيانات ، يُستخدم لإبلاغ DTE الطرف الآخر ما إذا كان الجهاز جاهزًا                                                              |
| GND   | الأرضية                              | الأرضية ، قد تكون الجهد الأرضي بين جهازي الاتصال مختلفة ، وهذا يؤثر على إشارة الجهد بين الجهتين المرسلة والمستقبلة ، لذا يجب استخدام الأرضية لربط جهازي البورت السلسلي معًا |
| DSR   | جاهزية جهاز البيانات (DCE)           | Data Set Ready ، جاهزية إرسال البيانات ، يُستخدم لإبلاغ DCE الطرف الآخر ما إذا كان الجهاز جاهزًا                                                                            |
| RTS   | طلب الإرسال                          | Request To Send ، طلب الإرسال ، يُطلب من DTE إرسال البيانات إلى جهاز DCE                                                                                                    |
| CTS   | السماح بالإرسال                      | Clear To Send ، السماح بالإرسال ، يُرد DCE على طلب RTS المرسل ، ويُخبر الطرف الآخر ما إذا كان بإمكانه إرسال البيانات                                                        |
| RI    | مؤشر الجرس                           | Ring Indicator ، مؤشر الجرس ، يشير إلى أن جهاز DCE متصل بالخط                                                                                                               |

رؤوس DB9 الذكور والإناث لها TX / RX معكوسة ، لذا يمكن توصيلها عادةً ، وهي مكافئة لتوصيل هذه الخطوط الإشارة:

![](https://media.wiki-power.com/img/20220415103901.png)

في استخدام الواقع ، في بعض الأحيان يتم الاحتفاظ فقط بـ RXD و TXD و GND.

## المراجع والشكر

- [USART — 串口通讯](https://doc.embedfire.com/mcu/stm32/f103/hal_generalzh/latest/doc/chapter20/chapter20.html)

> عنوان النص: <https://wiki-power.com/>
> يتم حماية هذا المقال بموجب اتفاقية [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by/4.0/deed.zh)، يُرجى ذكر المصدر عند إعادة النشر.

> تمت ترجمة هذه المشاركة باستخدام ChatGPT، يرجى [**تزويدنا بتعليقاتكم**](https://github.com/linyuxuanlin/Wiki_MkDocs/issues/new) إذا كانت هناك أي حذف أو إهمال.
